COPY   START  1000
EOF    BYTE   C'EOF' 
THREE  WORD   3
ZERO   WORD   0
RETADR RESW   1
LENGTH RESW   1
BUFFER RESB   4096
       .
FIRST  STL    RETADR
CLOOP  JSUB   RDREC
       LDA    LENGTH
       COMP   ZERO
       JEQ    ENDFIL
       JSUB   WRREC
       J      CLOOP
ENDFIL LDA    EOF
       STA    BUFFER
       LDA    THREE
       STA    LENGTH
       JSUB   WRREC
       LDL    RETADR
       RSUB
       .
       .      RDREC SUBROUTINE
       .
INPUT  BYTE   X'F1'
MAXLEN WORD   4096
<<<<<<< HEAD

=======
       .
>>>>>>> 8c6d972d2b82581246e1dd19404e4dc42f0690b1
RDREC  LDX    ZERO
       LDA    ZERO
RLOOP  TD     INPUT
       JEQ    RLOOP
       RD     INPUT
       COMP   ZERO
       JEQ    EXIT
       STCH   BUFFER,X
       TIX    MAXLEN
       JLT    RLOOP
EXIT   STX    LENGTH
       RSUB
       .
       .      WRREC SUBROUTINE
       .
OUTPUT BYTE   X'05'
       .
WRREC  LDX    ZERO
WLOOP  TD     OUTPUT
       JEQ    WLOOP
       LDCH   BUFFER,X
       WD     OUTPUT
       TIX    LENGTH
<<<<<<< HEAD
       JST    WLOOP
=======
       JLT    WLOOP
>>>>>>> 8c6d972d2b82581246e1dd19404e4dc42f0690b1
       RSUB
       END    FIRST